@model AccountViewModel

<h6>Account Details</h6>

<form id="accountForm" asp-controller="Login" asp-action="Update" method="post" class="mt-3">
    <input hidden asp-for="UserDto.UserId" />
    <input hidden asp-for="UserDto.UserType" />

    <div class="form-group row">
        <label asp-for="UserDto.UserName" class="col-sm-2 col-form-label"></label>
        <div class="col-sm-10">
            <input asp-for="UserDto.UserName" class="form-control" />
            <span asp-validation-for="UserDto.UserName" class="text-danger"></span>
        </div>
    </div>
    <div class="form-group row">
        <label asp-for="UserDto.Password" class="col-sm-2 col-form-label"></label>
        <div class="col-sm-10">
            <input asp-for="UserDto.Password" class="form-control" />
            <span asp-validation-for="UserDto.Password" class="text-danger"></span>
        </div>
    </div>

    <div>
        <button type="button" onclick="AjaxFormSubmit()">Update</button>
    </div>
</form>

<script>
    function AjaxFormSubmit() {
        var url = $('#accountForm').attr('action');

        var formData = new FormData();
        formData.append("userid", @Model.UserDto.UserId);
        formData.append("usertype", @Model.UserDto.UserType);
        formData.append("username", $('#UserDto_UserName').val());
        formData.append("password", $('#UserDto_Password').val());

        $.ajax({
            type: 'POST',
            url: url,
            data: formData,
            processData: false,
            contentType: false
        }).done(function (response) {
            if (response == null) {
                alert('Update failed');

            } else {
                alert('Update success');
                $('#UserDto_UserName').val(response.userName);
                $('#UserDto_Password').val(response.password);
            }
        });
    }
</script>